window.onscroll=function(){g()};function g(){const n=document.getElementById("header");document.body.scrollTop>30||document.documentElement.scrollTop>30?(n.classList.add("header-fixed"),n.classList.remove("header-initial")):(n.classList.remove("header-fixed"),n.classList.add("header-initial"))}document.addEventListener("DOMContentLoaded",function(){const n=document.querySelectorAll(".dropdown");let e=null,i=null;const t=sessionStorage.getItem("cameFromFAQ"),r=sessionStorage.getItem("selectedDropdown");let o=null,l=null,d=!1;t==="true"&&r&&(n.forEach(s=>{const c=s.nextElementSibling,a=s.querySelector(".arrow-icon");s.textContent.trim()===r&&(o=c,l=a,d=!0)}),sessionStorage.removeItem("cameFromFAQ"),sessionStorage.removeItem("selectedDropdown")),!o&&n.length>0&&(o=n[0].nextElementSibling,l=n[0].querySelector(".arrow-icon")),o&&(o.classList.remove("hidden"),l.classList.add("rotate"),e=o,i=l,d&&setTimeout(()=>{const s=o.getBoundingClientRect().top+window.scrollY-window.innerHeight/4;window.scrollTo({top:s,behavior:"smooth"})},200)),window.storeDropdownSelection=function(s,c){s.preventDefault(),sessionStorage.setItem("cameFromFAQ","true"),sessionStorage.setItem("selectedDropdown",c),window.location.href=s.currentTarget.href},n.forEach(s=>{const c=s.nextElementSibling,a=s.querySelector(".arrow-icon");s.addEventListener("click",function(){const u=c===e;e&&e!==c&&(e.classList.add("hidden"),i.classList.remove("rotate")),u?(c.classList.add("hidden"),a.classList.remove("rotate"),e=null,i=null):(c.classList.remove("hidden"),a.classList.add("rotate"),e=c,i=a,setTimeout(()=>{if(s!==n[0]){const w=s.getBoundingClientRect().top+window.scrollY-window.innerHeight/4;window.scrollTo({top:w,behavior:"smooth"})}},300))})})});document.addEventListener("DOMContentLoaded",function(){const n=document.querySelectorAll(".dropdown-details");let e=null;n.forEach((i,t)=>{const r=i.nextElementSibling,o=i.querySelector(".arrow-icon");r.querySelector(".activeClass")&&(r.classList.remove("hidden"),o.classList.add("rotate"),e=r),i.addEventListener("click",function(){e&&e!==r&&(e.classList.add("hidden"),e.previousElementSibling.querySelector(".arrow-icon").classList.remove("rotate")),r.classList.contains("hidden")?(r.classList.remove("hidden"),o.classList.add("rotate"),e=r,t>=3&&setTimeout(()=>{const s=i.getBoundingClientRect().top+window.scrollY-window.innerHeight/4;window.scrollTo({top:s,behavior:"smooth"})},200)):(r.classList.add("hidden"),o.classList.remove("rotate"),e=null)})})});document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("searchInput"),e=document.getElementById("searchResults");n.addEventListener("focus",function(){e.classList.remove("hidden")}),n.addEventListener("blur",function(){setTimeout(function(){e.contains(document.activeElement)||e.classList.add("hidden")},100)})});const m="https://simprosys.frappe.cloud",h="c58178baf306cfa",f="51c0b9c774c0488";document.getElementById("subscribe_email").addEventListener("submit",async function(n){n.preventDefault();const e=document.getElementById("emailInput"),i=e.value.trim(),t=document.getElementById("emailError");if(t.textContent="",t.classList.remove("hidden"),t.style.color="",!i){t.textContent="Please enter email address",t.style.color="red";return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){t.textContent="Enter a valid Email Address",t.style.color="red";return}try{if((await(await fetch(`${m}/api/resource/Simprosy%20Newsletter%20Subscriber?filters=${encodeURIComponent(JSON.stringify([["email","=",i]]))}`,{headers:{Authorization:`token ${h}:${f}`,"Content-Type":"application/json"}})).json())?.data?.length>0){t.textContent="This email is already subscribed.",t.style.color="yellow";return}}catch(o){console.error("Error checking email existence:",o),t.textContent="Something went wrong! Please try again.",t.style.color="red";return}try{const o=await fetch(`${m}/api/resource/Simprosy%20Newsletter%20Subscriber`,{method:"POST",headers:{Authorization:`token ${h}:${f}`,"Content-Type":"application/json"},body:JSON.stringify({email:i})}),l=await o.json();o.ok?(t.textContent="Subscribed Successfully!",t.style.color="yellow",e.value=""):(t.textContent=l?.message||"Subscription failed!",t.style.color="red")}catch(o){console.error("Error inserting email:",o),t.textContent="Subscription failed!",t.style.color="red"}});
